(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();const x=window.devicePixelRatio||1;class D{constructor(t){this.started=!1,this.animationId=null,this.mouseSignals=[],this.keySignals=[],this.element=null,this.setCanvas(t),this.setCanvasSize(),this.setCanvasSizeOnResize()}setCanvas(t){this.canvas=typeof t=="string"?document.querySelector(t):t,this.ctx=this.canvas.getContext("2d")}setCanvasSize(){const{width:t,height:e}=this.canvas.getBoundingClientRect();this.width=t,this.height=e,this.canvas.width=t*x,this.canvas.height=e*x,this.ctx.scale(x,x)}setCanvasSizeOnResize(){this.resizeListener=this.setCanvasSize.bind(this),window.addEventListener("resize",this.resizeListener)}start(t){this.started&&this.end(),this.insertElement(t),this.startAnimation(),this.setupSignals(),this.started=!0}insertElement(t){t.insertToUI(this)}startAnimation(){const t=()=>{this.animationId=requestAnimationFrame(t),this.updateUI()};t()}updateUI(){this.clearCanvas(),this.element.start(),this.element.measure(this.getMaxSize()),this.element.locate(this.getCoords()),this.element.draw(this.ctx),this.element.end()}getMaxSize(){return{width:this.width,height:this.height}}getCoords(){return{x:0,y:0}}setupSignals(){this.setupMouseSignals(),this.setupKeySignals()}setupMouseSignals(){const t=this.getMouseSignalTypes();for(const e of t){const n=i=>{const r=this.getMouseSignalData(i);this.element.signal({type:e,data:r})};this.mouseSignals.push({type:e,callback:n}),this.canvas.addEventListener(e,n)}}getMouseSignalTypes(){return["mousedown","mouseup","mousemove","mouseenter","mouseleave"]}getMouseSignalData(t){return{x:t.offsetX,y:t.offsetY}}setupKeySignals(){const t=this.getKeySignalTypes();for(const e of t){const n=i=>{if(i.repeat)return;const r=this.getKeySignalData(i);this.element.signal({type:e,data:r})};this.keySignals.push({type:e,callback:n}),window.addEventListener(e,n)}}getKeySignalTypes(){return["keydown","keyup"]}getKeySignalData(t){return t.key}end(){this.started&&(this.removeSignals(),this.stopAnimation(),this.removeElement(),this.started=!1)}removeSignals(){this.removeMouseSignals(),this.removeKeySignals()}removeMouseSignals(){for(const{type:t,callback:e}of this.mouseSignals)this.canvas.removeEventListener(t,e);this.mouseSignals=[]}removeKeySignals(){for(const{type:t,callback:e}of this.keySignals)window.removeEventListener(t,e);this.keySignals=[]}stopAnimation(){cancelAnimationFrame(this.animationId),this.animationId=null,this.clearCanvas()}removeElement(){this.element=null}clearCanvas(){const t=this.getCoords(),e=this.getMaxSize();this.ctx.clearRect(t.x,t.y,e.width,e.height)}}let G=class{constructor(){this.events=new Map,this.add()}[Symbol.iterator](){return this.events[Symbol.iterator]()}set(s,t){this.events.set(s,{check:t,callbacks:[]})}get(s){return this.events.get(s)}add(){this.click(),this.mousedown(),this.mouseup(),this.mouseenter(),this.mouseleave(),this.mousemove(),this.keydown(),this.keyup()}click(){this.set("click",(function(s,t,e){if(t.type!=="mousedown"&&t.type!=="mouseup")return{event:!1};const n=S(t.data,s);if(t.type==="mousedown")return e.set("wasMouseDown",n),{event:!1};const i=e.get("wasMouseDown",!1);return{event:n&&i,data:t.data}}))}mousedown(){this.set("mousedown",(function(s,t){return t.type!=="mousedown"?{event:!1}:S(t.data,s)?{event:!0,data:t.data}:{event:!1}}))}mouseup(){this.set("mouseup",(function(s,t){return t.type!=="mouseup"?{event:!1}:S(t.data,s)?{event:!0,data:t.data}:{event:!1}}))}mouseenter(){this.set("mouseenter",(function(s,t,e){if(t.type==="mouseleave"&&e.set("wasOut",!0),t.type!=="mousemove")return{event:!1};const n=S(t.data,s),i=e.get("wasOut",!0),r=n&&i;return e.set("wasOut",!n),{event:r,data:t.data}}))}mouseleave(){this.set("mouseleave",(function(s,t,e){if(t.type==="mouseleave")return e.set("wasIn",!1),{event:!0,data:t.data};if(t.type!=="mousemove")return{event:!1};const n=!S(t.data,s),i=e.get("wasIn",!1),r=n&&i;return e.set("wasIn",!n),{event:r,data:t.data}}))}mousemove(){this.set("mousemove",(function(s,t){return t.type!=="mousemove"?{event:!1}:S(t.data,s)?{event:!0,data:t.data}:{event:!1}}))}keydown(){this.set("keydown",(function(s,t){return t.type!=="keydown"?{event:!1}:{event:!0,data:t.data}}))}keyup(){this.set("keyup",(function(s,t){return t.type!=="keyup"?{event:!1}:{event:!0,data:t.data}}))}};function S(s,t){return s.x>=t.coords.x&&s.y>=t.coords.y&&s.x<=t.coords.x+t.size.width&&s.y<=t.coords.y+t.size.height}let A=class{constructor(){this.properties=new Map,this.functions=new Map}set(s,t){this.properties.set(s,t)}get(s){return this.properties.get(s)}fun(s,t){this.functions.set(s,t)}call(s,...t){return this.functions.get(s)(...t)}};class k{constructor(t){this.name=t,this.properties=new Map,this.functions=new Map,this.lifecycle=this.getLifecycle(),this.inner=new A,this.events=new G}getLifecycle(){return new P}set(t,e){this.properties.set(t,e)}fun(t,e){this.functions.set(t,e)}}class P{constructor(){this.lifecycle=new Map,this.setFunctions()}setFunctions(){this.lifecycle.set("onCreate",(()=>{})),this.lifecycle.set("onStart",(()=>{})),this.lifecycle.set("onMeasure",(()=>{})),this.lifecycle.set("onLocate",(()=>{})),this.lifecycle.set("onDraw",(()=>{})),this.lifecycle.set("onEnd",(()=>{}))}[Symbol.iterator](){return this.lifecycle[Symbol.iterator]()}set(t,e){this.lifecycle.has(t)&&this.lifecycle.set(t,e)}}class U extends k{getLifecycle(){return new $}}class $ extends P{setFunctions(){super.setFunctions(),this.lifecycle.set("getSize",(()=>({width:0,height:0}))),this.lifecycle.set("drawItself",(()=>{}))}}class H extends k{constructor(t){super(t),this.layoutParams=new W}getLifecycle(){return new N}}class N extends P{setFunctions(){super.setFunctions(),this.lifecycle.set("sortChildrenToMeasure",(t=>t.children)),this.lifecycle.set("getChildMaxSize",(()=>({width:0,height:0}))),this.lifecycle.set("getSize",(()=>({width:0,height:0}))),this.lifecycle.set("sortChildrenToLocate",(t=>t.children)),this.lifecycle.set("getChildCoords",((t,e)=>e)),this.lifecycle.set("drawItself",(()=>{})),this.lifecycle.set("sortChildrenToDraw",(t=>t.children))}}let W=class{constructor(){this.layoutParams=new Map}[Symbol.iterator](){return this.layoutParams[Symbol.iterator]()}set(s,t){this.layoutParams.set(s,t)}};class O extends k{getLifecycle(){return new V}}class V extends P{setFunctions(){super.setFunctions(),this.lifecycle.set("getElement",(()=>{})),this.lifecycle.set("updateElement",(()=>{}))}}function _(s){return JSON.parse(JSON.stringify(s))}function R(s,t){const e=s.findIndex((n=>n===t));return e!==-1&&(s.splice(e,1),!0)}class q{constructor(t,e){this.element=t,this.properties=new Map,this.functions=new Map,this.setProperties(e.properties),this.setFunctions(e.functions)}setProperties(t){for(const[e,n]of t)this.properties.set(e,_(n))}setFunctions(t){for(const[e,n]of t)this.functions.set(e,n.bind(this.element,this.element))}set(t,e){this.properties.set(t,e)}get(t){return this.properties.get(t)}fun(t,e){this.functions.set(t,e.bind(this.element,this.element))}call(t,...e){return this.functions.get(t)(...e)}}class X{constructor(t){this.element=t,this.properties=new Map,this.functions=new Map}set(t,e){this.properties.set(t,e)}get(t){return this.properties.get(t)}fun(t,e){this.functions.set(t,e.bind(this.element,this.element))}call(t,...e){return this.functions.get(t)(...e)}}class Y{constructor(t){this.events=new Map,this.setEvents(t)}setEvents(t){for(const[e,{check:n,callbacks:i}]of t)this.events.set(e,{check:n,state:new K,callbacks:[...i]})}[Symbol.iterator](){return this.events[Symbol.iterator]()}get(t){return this.events.get(t)}}class K{constructor(){this.keys=new Map}set(t,e){this.keys.set(t,e)}get(t,e){return this.has(t)?this.keys.get(t):e}del(t){this.keys.delete(t)}has(t){return this.keys.has(t)}}class j{constructor(t){this.events=t}add(t,e){this.events.get(t).callbacks.push(e)}remove(t,e){return R(this.events.get(t).callbacks,e)}removeAll(t){const e=this.events.get(t).callbacks;e.splice(0,e.length)}}class J{constructor(t){this.layoutParent=t.layoutParent,this.layoutParams=new Map,this.setLayoutParams()}setLayoutParams(){for(const[t,e]of this.layoutParent.childLayoutParams)this.layoutParams.set(t,_(e))}set(t,e){this.layoutParams.has(t)&&this.layoutParams.set(t,e)}get(t){return this.layoutParams.get(t)}}class M{get layoutParams(){return this.layoutParameters}constructor(t,e){this.id=t,this.size={width:0,height:0},this.coords={x:0,y:0},this.properties=new Map,this.functions=new Map,this.lifecycle=new Map,this.setProperties(e.properties),this.setFunctions(e.functions),this.setLifecycle(e.lifecycle),this.inner=new q(this,e.inner),this.custom=new X(this),this.events=new Y(e.events),this.listeners=new j(this.events),this.lifecycle.get("onCreate")()}setProperties(t){for(const[e,n]of t)this.properties.set(e,_(n))}setFunctions(t){for(const[e,n]of t)this.functions.set(e,n.bind(this,this))}setLifecycle(t){for(const[e,n]of t)this.lifecycle.set(e,n.bind(this,this))}set(t,e){this.properties.has(t)&&this.properties.set(t,e)}get(t){return this.properties.get(t)}fun(t,e){this.functions.set(t,e.bind(this,this))}call(t,...e){return this.functions.get(t)(...e)}insertToUI(t){this.removeFromUI(),this.removeFromLayout(),t.element=this,this.uiParent=t}removeFromUI(){this.uiParent&&(this.uiParent.element=null),delete this.uiParent,this.resetPlacementData()}insertToLayout(t){this.removeFromUI(),this.removeFromLayout(),t.children.push(this),this.layoutParent=t,this.layoutParameters=new J(this)}removeFromLayout(){this.layoutParent&&R(this.layoutParent.children,this),delete this.layoutParent,delete this.layoutParameters,this.resetPlacementData()}resetPlacementData(){this.size={width:0,height:0},this.coords={x:0,y:0}}start(){this.lifecycle.get("onStart")()}measure(t){this.lifecycle.get("onMeasure")(t)}locate(t){this.lifecycle.get("onLocate")(t)}draw(t){this.lifecycle.get("onDraw")(t)}end(){this.lifecycle.get("onEnd")()}signal(t){for(const[,{check:e,state:n,callbacks:i}]of this.events){const{event:r,data:o}=e(this,t,n);if(r)for(const l of i)l(this,o)}}}class Q extends M{constructor(t,e){super(t,e)}measure(t){super.measure(t),this.setSize(t)}setSize(t){this.size=this.lifecycle.get("getSize")(t)}locate(t){super.locate(t),this.setCoords(t)}setCoords(t){this.coords=t}draw(t){super.draw(t),this.drawItself(t)}drawItself(t){this.lifecycle.get("drawItself")(t)}}class T extends M{constructor(t,e){super(t,e),this.children=[],this.childLayoutParams=new Map,this.setChildLayoutParams(e)}setChildLayoutParams(t){for(const[e,n]of t.layoutParams)this.childLayoutParams.set(e,n)}start(){super.start();for(const t of this.children)t.start()}measure(t){super.measure(t),this.setChildrenSizes(t),this.setSize(t)}setChildrenSizes(t){const e=this.sortChildrenToMeasure(t),n=[];for(const i of e){const r=this.getChildMaxSize(t,i,n);i.measure(r),n.push(i)}}sortChildrenToMeasure(t){return this.lifecycle.get("sortChildrenToMeasure")(t)}getChildMaxSize(t,e,n){return this.lifecycle.get("getChildMaxSize")(t,e,n)}setSize(t){this.size=this.lifecycle.get("getSize")(t)}locate(t){super.locate(t),this.setChildrenCoords(t),this.setCoords(t)}setChildrenCoords(t){const e=this.sortChildrenToLocate(t),n=[];for(const i of e){const r=this.getChildCoords(t,i,n);i.locate(r),n.push(i)}}sortChildrenToLocate(t){return this.lifecycle.get("sortChildrenToLocate")(t)}getChildCoords(t,e,n){return this.lifecycle.get("getChildCoords")(t,e,n)}setCoords(t){this.coords=t}draw(t){super.draw(t),this.drawItself(t),this.drawChildren(t)}drawItself(t){this.lifecycle.get("drawItself")(t)}drawChildren(t){const e=this.sortChildrenToDraw(t);for(const n of e)n.draw(t)}sortChildrenToDraw(t){return this.lifecycle.get("sortChildrenToDraw")(t)}end(){super.end();for(const t of this.children)t.end()}signal(t){super.signal(t);for(const e of this.children)e.signal(t)}insert(t){t.insertToLayout(this)}remove(t){this.children.includes(t)&&t.removeFromLayout()}removeAll(){for(const t of[...this.children])t.removeFromLayout()}find(t,e=!1){const n=[...this.children];for(;n.length>0;){const i=n.shift();if(i.id===t)return i;i instanceof T&&!e&&n.push(...i.children)}return null}}class Z extends M{constructor(t,e){super(t,e),this.child=this.lifecycle.get("getElement")()}start(){super.start(),this.lifecycle.get("updateElement")(this.child),this.child.start()}measure(t){super.measure(t),this.child.measure(t),this.size=this.child.size}locate(t){super.locate(t),this.child.locate(t),this.coords=t}draw(t){super.draw(t),this.child.draw(t)}end(){super.end(),this.child.end()}signal(t){super.signal(t),this.child.signal(t)}}const z={length(s,t,e=()=>0){let n=s===null?e():s;return n>t&&(n=t),n<0&&(n=0),n},availableLength:(s,t)=>s===null?t:s<t?s:t,desiredLength(s,t){if(s==="auto")return null;const{unit:e,value:n}=s;return e==="px"?n:t*(n/100)},size(s,t,e={width:()=>0,height:()=>0}){return{width:this.length(s.width,t.width,e.width),height:this.length(s.height,t.height,e.height)}},availableSize(s,t){return{width:this.availableLength(s.width,t.width),height:this.availableLength(s.height,t.height)}},desiredSize(s,t){return{width:this.desiredLength(s.width,t.width),height:this.desiredLength(s.height,t.height)}},textSize(s,t){const e=document.createElement("canvas").getContext("2d");return e.font=`${t.weight} ${t.size}px ${t.family}`,{width:e.measureText(s).width,height:t.size}}},b={area(s,t,e,n,i,r){const o={x:t.x+i.size/2,y:t.y+i.size/2},l=e.width-i.size,a=e.height-i.size,c={width:l,height:a};let u=r.size;r.size>l/2&&(u=l/2),r.size>a/2&&(u=a/2),u<0&&(u=0);const g={type:r.type,size:u};s.save(),s.beginPath(),s.fillStyle=n,s.strokeStyle=i.color,s.lineWidth=i.size,this._areaPath(s,o,c,g),s.fill(),i.size>0&&s.stroke(),s.restore()},_areaPath(s,t,e,n){s.moveTo(t.x,t.y+e.height-n.size),this._leftEdgePath(s,t,n),this._topLeftCornerPath(s,t,n),this._topEdgePath(s,t,e,n),this._topRightCornerPath(s,t,e,n),this._rightEdgePath(s,t,e,n),this._bottomRightCornerPath(s,t,e,n),this._bottomEdgePath(s,t,e,n),this._bottomLeftCornerPath(s,t,e,n),s.closePath()},_leftEdgePath(s,t,e){s.lineTo(t.x,t.y+e.size)},_topLeftCornerPath(s,t,e){const n={x:t.x,y:t.y+e.size},i={x:t.x+e.size,y:t.y};e.type==="round"?s.arcTo(n.x,n.y-e.size,i.x,i.y,e.size):s.lineTo(i.x,i.y)},_topEdgePath(s,t,e,n){s.lineTo(t.x+e.width-n.size,t.y)},_topRightCornerPath(s,t,e,n){const i={x:t.x+e.width-n.size,y:t.y},r={x:t.x+e.width,y:t.y+n.size};n.type==="round"?s.arcTo(i.x+n.size,i.y,r.x,r.y,n.size):s.lineTo(r.x,r.y)},_rightEdgePath(s,t,e,n){s.lineTo(t.x+e.width,t.y+e.height-n.size)},_bottomRightCornerPath(s,t,e,n){const i={x:t.x+e.width,y:t.y+e.height-n.size},r={x:t.x+e.width-n.size,y:t.y+e.height};n.type==="round"?s.arcTo(i.x,i.y+n.size,r.x,r.y,n.size):s.lineTo(r.x,r.y)},_bottomEdgePath(s,t,e,n){s.lineTo(t.x+n.size,t.y+e.height)},_bottomLeftCornerPath(s,t,e,n){const i={x:t.x+n.size,y:t.y+e.height},r={x:t.x,y:t.y+e.height-n.size};n.type==="round"?s.arcTo(i.x-n.size,i.y,r.x,r.y,n.size):s.lineTo(r.x,r.y)},rectangle(s,t,e,n){const{x:i,y:r}=t,{width:o,height:l}=e;s.save(),s.fillStyle=n,s.fillRect(i,r,o,l),s.restore()},text(s,t,e,n,i,r,o){s.save(),s.beginPath(),s.rect(t.x,t.y,e.width,e.height),s.clip(),s.font=`${r.weight} ${r.size}px ${r.family}`,s.fillStyle=o,s.textBaseline="top",s.fillText(i,n.x,n.y),s.restore()},image(s,t,e,n){const{x:i,y:r}=t,{width:o,height:l}=e;s.drawImage(n,i,r,o,l)}},d={alignStart:(s,t,e={start:0,end:0})=>s.start+e.start,alignMiddle:(s,t,e={start:0,end:0})=>s.start+(s.end-s.start)/2-(t+e.start+e.end)/2+e.start,alignEnd:(s,t,e={start:0,end:0})=>s.end-t-e.end};function tt(){(function(){const s=m.view.newType("area");s.set("size",{width:{unit:"px",value:100},height:{unit:"px",value:100}}),s.set("background","#000"),s.set("border",{color:"#000",size:0}),s.set("corner",{type:"cut",size:0}),s.lifecycle.set("getSize",(function(t,e){const n=z.desiredSize(t.get("size"),e);return z.size(n,e)})),s.lifecycle.set("drawItself",(function(t,e){const n=t.coords,i=t.size,r=t.get("background"),o=t.get("border"),l=t.get("corner");b.area(e,n,i,r,o,l)}))})(),(function(){const s=m.view.newType("text");s.set("text","Text"),s.set("font",{size:16,family:"Courier New",weight:400}),s.set("color","#000"),s.set("align",{vertical:"middle",horizontal:"left"}),s.lifecycle.set("onMeasure",(function(t){const e=z.textSize(t.get("text"),t.get("font"));t.inner.set("textSize",e)})),s.lifecycle.set("getSize",(function(t,e){return z.size(t.inner.get("textSize"),e)})),s.lifecycle.set("onLocate",(function(t,e){const n=t.inner.call("getTextCoords",e);t.inner.set("textCoords",n)})),s.inner.fun("getTextCoords",(function(t,e){return{x:t.inner.call("getTextX",e),y:t.inner.call("getTextY",e)}})),s.inner.fun("getTextX",(function(t,e){const n=e.x,i={start:n,end:n+t.size.width},r=t.inner.get("textSize").width,o=t.get("align").horizontal;return o==="left"?d.alignStart(i,r):o==="middle"?d.alignMiddle(i,r):d.alignEnd(i,r)})),s.inner.fun("getTextY",(function(t,e){const n=e.y,i={start:n,end:n+t.size.height},r=t.inner.get("textSize").height,o=t.get("align").vertical;return o==="top"?d.alignStart(i,r):o==="middle"?d.alignMiddle(i,r):d.alignEnd(i,r)})),s.lifecycle.set("drawItself",(function(t,e){b.text(e,t.coords,t.size,t.inner.get("textCoords"),t.get("text"),t.get("font"),t.get("color"))}))})(),(function(){const s=m.view.newType("image");s.set("size",{width:100,height:100}),s.set("src",""),s.inner.set("lastSrc",""),s.lifecycle.set("onCreate",(function(t){t.inner.set("img",new Image)})),s.lifecycle.set("onStart",(function(t){t.get("src")!==t.inner.get("lastSrc")&&(t.inner.get("img").src=t.get("src"))})),s.lifecycle.set("getSize",(function(t,e){return z.size(t.get("size"),e)})),s.lifecycle.set("drawItself",(function(t,e){b.image(e,t.coords,t.size,t.inner.get("img"))})),s.lifecycle.set("onEnd",(function(t){t.inner.set("lastSrc",t.get("src"))}))})()}function et(){const s=m.layout.newType("frame");s.set("size",{width:{unit:"%",value:100},height:{unit:"%",value:100}}),s.set("background","rgba(0,0,0,0)"),s.set("border",{color:"#000",size:0}),s.set("corner",{type:"cut",size:0}),s.layoutParams.set("align",{horizontal:"left",vertical:"top"}),s.layoutParams.set("zIndex",0),s.layoutParams.set("margin",{top:0,right:0,bottom:0,left:0}),(function(t){t.lifecycle.set("onMeasure",(function(e,n){const i=z.desiredSize(e.get("size"),n),r=z.availableSize(i,n),o={width:r.width-2*e.get("border").size,height:r.height-2*e.get("border").size};e.inner.set("desiredSize",i),e.inner.set("availableSize",r),e.inner.set("availableContentSize",o)})),t.lifecycle.set("getChildMaxSize",(function(e,n,i){const r=e.inner.get("availableContentSize"),o=i.layoutParams.get("margin");let l=r.width-o.left-o.right;l<0&&(l=0);let a=r.height-o.top-o.bottom;return a<0&&(a=0),{width:l,height:a}})),t.lifecycle.set("getSize",(function(e,n){const i=z.size(e.inner.get("desiredSize"),n,{width:()=>e.inner.call("getAutoWidth"),height:()=>e.inner.call("getAutoHeight")});return e.inner.set("contentSize",{width:i.width-2*e.get("border").size,height:i.height-2*e.get("border").size}),i})),t.inner.fun("getAutoWidth",(function(e){return e.children.reduce(((n,i)=>{const r=i.layoutParams.get("margin"),o=i.size.width+r.left+r.right;return n>o?n:o}),0)+2*e.get("border").size})),t.inner.fun("getAutoHeight",(function(e){return e.children.reduce(((n,i)=>{const r=i.layoutParams.get("margin"),o=i.size.height+r.top+r.bottom;return n>o?n:o}),0)+2*e.get("border").size}))})(s),(function(t){t.lifecycle.set("onLocate",(function(e,n){e.inner.set("contentCoords",{x:n.x+e.get("border").size,y:n.y+e.get("border").size})})),t.lifecycle.set("getChildCoords",(function(e,n,i){return{x:e.inner.call("getChildX",i),y:e.inner.call("getChildY",i)}})),t.inner.fun("getChildX",(function(e,n){const i=e.inner.get("contentCoords").x,r={start:i,end:i+e.inner.get("contentSize").width},o=n.size.width,l={start:n.layoutParams.get("margin").left,end:n.layoutParams.get("margin").right},a=n.layoutParams.get("align").horizontal;return a==="left"?d.alignStart(r,o,l):a==="middle"?d.alignMiddle(r,o,l):d.alignEnd(r,o,l)})),t.inner.fun("getChildY",(function(e,n){const i=e.inner.get("contentCoords").y,r={start:i,end:i+e.inner.get("contentSize").height},o=n.size.height,l={start:n.layoutParams.get("margin").top,end:n.layoutParams.get("margin").bottom},a=n.layoutParams.get("align").vertical;return a==="top"?d.alignStart(r,o,l):a==="middle"?d.alignMiddle(r,o,l):d.alignEnd(r,o,l)}))})(s),(function(t){t.lifecycle.set("drawItself",(function(e,n){const i=e.coords,r=e.size,o=e.get("background"),l=e.get("border"),a=e.get("corner");b.area(n,i,r,o,l,a)})),t.lifecycle.set("sortChildrenToDraw",(function(e){return[...e.children].sort(((n,i)=>n.layoutParams.get("zIndex")-i.layoutParams.get("zIndex")))}))})(s)}function nt(){const s=m.layout.newType("linear");s.set("size",{width:{unit:"%",value:100},height:{unit:"%",value:100}}),s.set("direction","horizontal"),s.set("alignContent","middle"),s.set("alignItems","middle"),s.set("gap",0),s.set("background","rgba(0,0,0,0)"),s.set("border",{color:"#000",size:0}),s.set("corner",{type:"cut",size:0}),s.layoutParams.set("position",0),s.layoutParams.set("alignSelf","auto"),s.layoutParams.set("margin",{top:0,right:0,bottom:0,left:0}),(function(t){t.lifecycle.set("onStart",(function(e){const n=e.get("direction")==="horizontal"||e.get("direction")==="reverse-horizontal",i=e.get("direction")==="reverse-horizontal"||e.get("direction")==="reverse-vertical",r=[...e.children].sort(((o,l)=>o.layoutParams.get("position")-l.layoutParams.get("position")));i&&r.reverse(),e.inner.set("horizontal",n),e.inner.set("reverse",i),e.inner.set("sortedChildren",r)}))})(s),(function(t){t.lifecycle.set("onMeasure",(function(e,n){const i=z.desiredSize(e.get("size"),n),r=z.availableSize(i,n),o={width:r.width-2*e.get("border").size,height:r.height-2*e.get("border").size};e.inner.set("desiredSize",i),e.inner.set("availableSize",r),e.inner.set("availableContentSize",o)})),t.lifecycle.set("sortChildrenToMeasure",(function(e){return e.inner.get("sortedChildren")})),t.lifecycle.set("getChildMaxSize",(function(e,n,i,r){return{width:e.inner.call("getChildMaxWidth",n,i,r),height:e.inner.call("getChildMaxHeight",n,i,r)}})),t.inner.fun("getChildMaxWidth",(function(e,n,i,r){const o=e.inner.get("horizontal"),l=e.inner.get("availableContentSize"),a=e.get("gap"),c=i.layoutParams.get("margin");if(o){const g=r.reduce(((f,w)=>{const y=w.size.width,p=w.layoutParams.get("margin");return f+y+p.left+p.right+a}),0);let h=l.width-g-c.left-c.right;return h<0&&(h=0),h}let u=l.width-c.left-c.right;return u<0&&(u=0),u})),t.inner.fun("getChildMaxHeight",(function(e,n,i,r){const o=e.inner.get("horizontal"),l=e.inner.get("availableContentSize"),a=e.get("gap"),c=i.layoutParams.get("margin");if(!o){const g=r.reduce(((f,w)=>{const y=w.size.height,p=w.layoutParams.get("margin");return f+y+p.top+p.bottom+a}),0);let h=l.height-g-c.top-c.bottom;return h<0&&(h=0),h}let u=l.height-c.top-c.bottom;return u<0&&(u=0),u})),t.lifecycle.set("getSize",(function(e,n){const i=e.inner.call("getChildrenSize"),r=z.size(e.inner.get("desiredSize"),n,{width:()=>i.width+2*e.get("border").size,height:()=>i.height+2*e.get("border").size}),o={width:r.width-2*e.get("border").size,height:r.height-2*e.get("border").size};return e.inner.set("childrenSize",i),e.inner.set("contentSize",o),r})),t.inner.fun("getChildrenSize",(function(e){return{width:e.inner.call("getChildrenWidth"),height:e.inner.call("getChildrenHeight")}})),t.inner.fun("getChildrenWidth",(function(e){if(e.inner.get("horizontal")){const n=e.get("gap");return e.children.reduce(((i,r,o)=>{const l=r.layoutParams.get("margin"),a=r.size.width;return o===0?i+a+l.left+l.right:i+a+l.left+l.right+n}),0)}return e.children.reduce(((n,i)=>{const r=i.layoutParams.get("margin"),o=i.size.width+r.left+r.right;return n>o?n:o}),0)})),t.inner.fun("getChildrenHeight",(function(e){if(!e.inner.get("horizontal")){const n=e.get("gap");return e.children.reduce(((i,r,o)=>{const l=r.layoutParams.get("margin"),a=r.size.height;return o===0?i+a+l.top+l.bottom:i+a+l.top+l.bottom+n}),0)}return e.children.reduce(((n,i)=>{const r=i.layoutParams.get("margin"),o=i.size.height+r.top+r.bottom;return n>o?n:o}),0)}))})(s),(function(t){t.lifecycle.set("onLocate",(function(e,n){const i={x:n.x+e.get("border").size,y:n.y+e.get("border").size},r=e.inner.call("getChildrenCoord",i);e.inner.set("contentCoords",i),e.inner.set("childrenCoord",r)})),t.inner.fun("getChildrenCoord",(function(e,n){const i=e.inner.get("horizontal"),r=e.inner.get("contentSize"),o=e.inner.get("childrenSize"),l=e.get("alignContent");if(i){const u=o.width,g={start:n.x,end:n.x+r.width};return l==="start"?d.alignStart(g,u):l==="middle"?d.alignMiddle(g,u):d.alignEnd(g,u)}const a=o.height,c={start:n.y,end:n.y+r.height};return l==="start"?d.alignStart(c,a):l==="middle"?d.alignMiddle(c,a):d.alignEnd(c,a)})),t.lifecycle.set("sortChildrenToLocate",(function(e){return e.inner.get("sortedChildren")})),t.lifecycle.set("getChildCoords",(function(e,n,i,r){return{x:e.inner.call("getChildX",i,r),y:e.inner.call("getChildY",i,r)}})),t.inner.fun("getChildX",(function(e,n,i){if(e.inner.get("horizontal")){const f=i.length===0,w=n.layoutParams.get("margin");if(f)return e.inner.get("childrenCoord")+w.left;const y=i[i.length-1],p=e.get("gap");return y.coords.x+y.size.width+y.layoutParams.get("margin").right+p+w.left}const r=e.inner.get("contentCoords"),o=e.inner.get("contentSize"),l={start:r.x,end:r.x+o.width},a=n.size.width,c={start:n.layoutParams.get("margin").left,end:n.layoutParams.get("margin").right},u=e.get("alignItems"),g=n.layoutParams.get("alignSelf"),h=g==="auto"?u:g;return h==="start"?d.alignStart(l,a,c):h==="middle"?d.alignMiddle(l,a,c):d.alignEnd(l,a,c)})),t.inner.fun("getChildY",(function(e,n,i){if(!e.inner.get("horizontal")){const f=i.length===0,w=n.layoutParams.get("margin");if(f)return e.inner.get("childrenCoord")+w.top;const y=i[i.length-1],p=e.get("gap");return y.coords.y+y.size.height+y.layoutParams.get("margin").bottom+p+w.top}const r=e.inner.get("contentCoords"),o=e.inner.get("contentSize"),l={start:r.y,end:r.y+o.height},a=n.size.height,c={start:n.layoutParams.get("margin").top,end:n.layoutParams.get("margin").bottom},u=e.get("alignItems"),g=n.layoutParams.get("alignSelf"),h=g==="auto"?u:g;return h==="start"?d.alignStart(l,a,c):h==="middle"?d.alignMiddle(l,a,c):d.alignEnd(l,a,c)}))})(s),(function(t){t.lifecycle.set("drawItself",(function(e,n){const i=e.coords,r=e.size,o=e.get("background"),l=e.get("border"),a=e.get("corner");b.area(n,i,r,o,l,a)}))})(s)}function it(){const s=m.layout.newType("grid");s.set("size",{width:{unit:"%",value:100},height:{unit:"%",value:100}}),s.set("dimensions",{columns:[{count:1,unit:"fr",value:1}],rows:[{count:1,unit:"fr",value:1}]}),s.set("gap",{size:{vertical:0,horizontal:0},color:"rgba(0,0,0,0)"}),s.set("alignContent",{vertical:"middle",horizontal:"middle"}),s.set("alignItems",{vertical:"middle",horizontal:"middle"}),s.set("background","rgba(0,0,0,0)"),s.set("border",{color:"#000",size:0}),s.set("corner",{type:"cut",size:0}),s.layoutParams.set("position",{column:0,row:0}),s.layoutParams.set("span",{columns:1,rows:1}),s.layoutParams.set("alignSelf",{vertical:"auto",horizontal:"auto"}),s.layoutParams.set("zIndex",0),s.layoutParams.set("margin",{top:0,right:0,bottom:0,left:0}),(function(t){t.inner.fun("areChildCellsValid",(function(e,n){const i=n.layoutParams.get("position"),r=n.layoutParams.get("span"),o=e.inner.get("numColumns"),l=e.inner.get("numRows");return!(i.column<0||i.row<0||r.columns<1||r.rows<1||i.column+r.columns-1>=o||i.row+r.rows-1>=l)}))})(s),(function(t){t.lifecycle.set("onStart",(function(e){const n=e.get("dimensions"),i=n.columns,r=n.rows,o=i.reduce(((a,c)=>a+c.count),0),l=r.reduce(((a,c)=>a+c.count),0);e.inner.set("numColumns",o),e.inner.set("numRows",l)}))})(s),(function(t){t.lifecycle.set("onMeasure",(function(e,n){const i=z.desiredSize(e.get("size"),n);e.inner.set("desiredSize",i);const r=z.availableSize(i,n);e.inner.set("availableSize",r);const o={width:r.width-2*e.get("border").size,height:r.height-2*e.get("border").size};e.inner.set("availableContentSize",o);const l=e.inner.call("getColumnsWidths");e.inner.set("columnsWidths",l);const a=e.inner.call("getRowsHeights");e.inner.set("rowsHeights",a);const c=e.inner.call("getGridSize");e.inner.set("gridSize",c)})),t.inner.fun("getColumnsWidths",(function(e){const n=e.get("dimensions").columns,i=e.inner.get("availableContentSize").width,r=e.get("gap").size.horizontal;return e.inner.call("getPositionsLengths",n,i,r)})),t.inner.fun("getRowsHeights",(function(e){const n=e.get("dimensions").rows,i=e.inner.get("availableContentSize").height,r=e.get("gap").size.vertical;return e.inner.call("getPositionsLengths",n,i,r)})),t.inner.fun("getPositionsLengths",(function(e,n,i,r){const o=n.reduce(((h,f)=>f.count+h),0);if(o===0)return[];let l=i-r*(o-1);l<0&&(l=0);const a=n.reduce(((h,f)=>f.unit==="px"?h+f.count*f.value:h),0),c=(l-(a<l?a:l))/n.reduce(((h,f)=>f.unit==="fr"?h+f.count*f.value:h),0),u=[];let g=l;for(let h=0;h<n.length;h++){const{count:f,unit:w,value:y}=n[h];for(let p=0;p<f;p++){let v;v=w==="px"?y<g?y:g:c*y,u.push(v),g-=v}}return u})),t.inner.fun("getGridSize",(function(e){const n=e.inner.get("numColumns"),i=e.inner.get("numRows"),r=e.inner.get("columnsWidths"),o=e.inner.get("rowsHeights"),l=r.reduce(((c,u)=>c+u),0),a=o.reduce(((c,u)=>c+u),0);return{width:l+e.get("gap").size.horizontal*(n-1),height:a+e.get("gap").size.vertical*(i-1)}})),t.lifecycle.set("getChildMaxSize",(function(e,n,i){const r=e.get("gap").size,o=e.inner.get("columnsWidths"),l=e.inner.get("rowsHeights"),a=i.layoutParams.get("position"),c=i.layoutParams.get("span"),u=i.layoutParams.get("margin");return e.inner.call("areChildCellsValid",i)?{width:o.slice(a.column,a.column+c.columns).reduce(((g,h)=>g+h+r.horizontal),0)-r.horizontal-(u.left+u.right),height:l.slice(a.row,a.row+c.rows).reduce(((g,h)=>g+h+r.vertical),0)-r.vertical-(u.top+u.bottom)}:{width:0,height:0}})),t.lifecycle.set("getSize",(function(e,n){const i=z.size(e.inner.get("desiredSize"),n,{width:()=>e.inner.get("gridSize").width+2*e.get("border").size,height:()=>e.inner.get("gridSize").height+2*e.get("border").size}),r={width:i.width-2*e.get("border").size,height:i.height-2*e.get("border").size};return e.inner.set("contentSize",r),i}))})(s),(function(t){t.lifecycle.set("onLocate",(function(e,n){const i={x:n.x+e.get("border").size,y:n.y+e.get("border").size};e.inner.set("contentCoords",i);const r=e.inner.call("getGridCoords");e.inner.set("gridCoords",r);const o=e.inner.call("getColumnsCoords");e.inner.set("columnsCoords",o);const l=e.inner.call("getRowsCoords");e.inner.set("rowsCoords",l)})),t.inner.fun("getGridCoords",(function(e){return{x:e.inner.call("getGridX"),y:e.inner.call("getGridY")}})),t.inner.fun("getGridX",(function(e){const n=e.inner.get("contentCoords"),i=e.inner.get("contentSize"),r=e.inner.get("gridSize"),o={start:n.x,end:n.x+i.width},l=r.width,a=e.get("alignContent").horizontal;return a==="left"?d.alignStart(o,l):a==="middle"?d.alignMiddle(o,l):d.alignEnd(o,l)})),t.inner.fun("getGridY",(function(e){const n=e.inner.get("contentCoords"),i=e.inner.get("contentSize"),r=e.inner.get("gridSize"),o={start:n.y,end:n.y+i.height},l=r.height,a=e.get("alignContent").vertical;return a==="top"?d.alignStart(o,l):a==="middle"?d.alignMiddle(o,l):d.alignEnd(o,l)})),t.inner.fun("getColumnsCoords",(function(e){const n=e.inner.get("gridCoords").x,i=e.inner.get("columnsWidths"),r=e.get("gap").size.horizontal;return e.inner.call("getPositionsCoords",n,i,r)})),t.inner.fun("getRowsCoords",(function(e){const n=e.inner.get("gridCoords").y,i=e.inner.get("rowsHeights"),r=e.get("gap").size.vertical;return e.inner.call("getPositionsCoords",n,i,r)})),t.inner.fun("getPositionsCoords",(function(e,n,i,r){const o=[];let l=n;for(const a of i)o.push(l),l+=a+r;return o})),t.lifecycle.set("getChildCoords",(function(e,n,i){return e.inner.call("areChildCellsValid",i)?{x:e.inner.call("getChildX",i),y:e.inner.call("getChildY",i)}:{x:0,y:0}})),t.inner.fun("getChildX",(function(e,n){const i=n.layoutParams.get("position").column,r=n.layoutParams.get("span").columns,o=e.get("gap").size.horizontal,l=e.inner.get("columnsCoords"),a=e.inner.get("columnsWidths"),c=l[i],u={start:c,end:c+(a.slice(i,i+r).reduce(((p,v)=>p+v+o),0)-o)},g=n.size.width,h={start:n.layoutParams.get("margin").left,end:n.layoutParams.get("margin").right},f=e.get("alignItems").horizontal,w=n.layoutParams.get("alignSelf").horizontal,y=w==="auto"?f:w;return y==="left"?d.alignStart(u,g,h):y==="middle"?d.alignMiddle(u,g,h):d.alignEnd(u,g,h)})),t.inner.fun("getChildY",(function(e,n){const i=n.layoutParams.get("position").row,r=n.layoutParams.get("span").rows,o=e.get("gap").size.vertical,l=e.inner.get("rowsCoords"),a=e.inner.get("rowsHeights"),c=l[i],u={start:c,end:c+(a.slice(i,i+r).reduce(((p,v)=>p+v+o),0)-o)},g=n.size.height,h={start:n.layoutParams.get("margin").top,end:n.layoutParams.get("margin").bottom},f=e.get("alignItems").vertical,w=n.layoutParams.get("alignSelf").vertical,y=w==="auto"?f:w;return y==="left"?d.alignStart(u,g,h):y==="middle"?d.alignMiddle(u,g,h):d.alignEnd(u,g,h)}))})(s),(function(t){t.lifecycle.set("drawItself",(function(e,n){e.inner.call("drawArea",n),e.inner.call("drawGaps",n)})),t.inner.fun("drawArea",(function(e,n){const i=e.coords,r=e.size,o=e.get("background"),l=e.get("border"),a=e.get("corner");b.area(n,i,r,o,l,a)})),t.inner.fun("drawGaps",(function(e,n){e.inner.call("drawHorizontalGaps",n),e.inner.call("drawVerticalGaps",n)})),t.inner.fun("drawHorizontalGaps",(function(e,n){const i=e.inner.get("gridCoords"),r=e.inner.get("gridSize"),o=e.get("gap").size,l=e.get("gap").color,a=e.inner.get("rowsCoords");for(let c=1;c<a.length;c++){const u={x:i.x,y:a[c]-o.vertical},g={width:r.width,height:o.vertical};b.rectangle(n,u,g,l)}})),t.inner.fun("drawVerticalGaps",(function(e,n){const i=e.inner.get("gridCoords"),r=e.inner.get("gridSize"),o=e.get("gap").size,l=e.get("gap").color,a=e.inner.get("columnsCoords");for(let c=1;c<a.length;c++){const u={x:a[c]-o.horizontal,y:i.y},g={width:o.horizontal,height:r.height};b.rectangle(n,u,g,l)}})),t.lifecycle.set("sortChildrenToDraw",(function(e){return[...e.children].sort(((n,i)=>n.layoutParams.get("zIndex")-i.layoutParams.get("zIndex")))}))})(s)}function st(){const s=m.layout.newType("relative");s.set("size",{width:{unit:"%",value:100},height:{unit:"%",value:100}}),s.set("background","rgba(0,0,0,0)"),s.set("border",{color:"#000",size:0}),s.set("corner",{type:"cut",size:0}),s.layoutParams.set("attachTo",{top:null,right:null,bottom:null,left:null}),s.layoutParams.set("bias",{vertical:50,horizontal:50}),s.layoutParams.set("zIndex",0),s.layoutParams.set("margin",{top:0,right:0,bottom:0,left:0}),(function(t){t.inner.fun("getChildMaxLeft",(function(e,n){const i=n.layoutParams.get("attachTo").left;if(i===null||i==="parent")return e.get("border").size;const{side:r,child:o}=i,l=e.find(o);return r==="left"?e.inner.call("getChildLeft",l):e.inner.call("getChildRight",l)})),t.inner.fun("getChildMaxRight",(function(e,n){const i=n.layoutParams.get("attachTo").right;if(i===null||i==="parent")return e.inner.get("size").width-e.get("border").size;const{side:r,child:o}=i,l=e.find(o);return r==="left"?e.inner.call("getChildLeft",l):e.inner.call("getChildRight",l)})),t.inner.fun("getChildMaxTop",(function(e,n){const i=n.layoutParams.get("attachTo").top;if(i===null||i==="parent")return e.get("border").size;const{side:r,child:o}=i,l=e.find(o);return r==="top"?e.inner.call("getChildTop",l):e.inner.call("getChildBottom",l)})),t.inner.fun("getChildMaxBottom",(function(e,n){const i=n.layoutParams.get("attachTo").bottom;if(i===null||i==="parent")return e.inner.get("size").height-e.get("border").size;const{side:r,child:o}=i,l=e.find(o);return r==="top"?e.inner.call("getChildTop",l):e.inner.call("getChildBottom",l)})),t.inner.fun("getChildLeft",(function(e,n){const i=n.layoutParams.get("attachTo"),r=n.layoutParams.get("margin"),o=e.inner.call("getChildMaxLeft",n),l=e.inner.call("getChildMaxRight",n),a=n.size.width;if(i.right===null)return o+r.left;if(i.left===null)return l-r.right-a;const c={start:o,end:l},u=n.layoutParams.get("bias").horizontal;return e.inner.call("getCoordUsingBias",c,a,u,{start:r.left,end:r.right})})),t.inner.fun("getChildRight",(function(e,n){return e.inner.call("getChildLeft",n)+n.size.width})),t.inner.fun("getChildTop",(function(e,n){const i=n.layoutParams.get("attachTo"),r=n.layoutParams.get("margin"),o=e.inner.call("getChildMaxTop",n),l=e.inner.call("getChildMaxBottom",n),a=n.size.height;if(i.bottom===null)return o+r.top;if(i.top===null)return l-r.bottom-a;const c={start:o,end:l},u=n.layoutParams.get("bias").vertical;return e.inner.call("getCoordUsingBias",c,a,u,{start:r.top,end:r.bottom})})),t.inner.fun("getChildBottom",(function(e,n){return e.inner.call("getChildTop",n)+n.size.height})),t.inner.fun("getCoordUsingBias",(function(e,n,i,r,o){return n.start+(n.end-n.start-(i+o.start+o.end))*(r/100)+o.start}))})(s),(function(t){t.lifecycle.set("onStart",(function(e){const n=e.inner.call("getSortedPositionedChildren"),i=e.children.filter((o=>!n.includes(o))),r=[...n,...i];e.inner.set("sortedChildren",r),e.inner.set("notPositionedChildren",i)})),t.inner.fun("getSortedPositionedChildren",(function(e){const n=[],i=[...e.children];for(;i.length>0;){let r=!1;for(let o=0;o<i.length;o++){const l=i[o];e.inner.call("canPositionChild",n,l)&&(n.push(l),i.splice(o,1),o--,r=!0)}if(!r)break}return n})),t.inner.fun("canPositionChild",(function(e,n,i){const{top:r,bottom:o,right:l,left:a}=i.layoutParams.get("attachTo");for(const c of[r,o,l,a])if(c!==null&&c!=="parent"&&!n.includes(e.find(c.child)))return!1;return!0}))})(s),(function(t){t.lifecycle.set("onMeasure",(function(e,n){const i=z.desiredSize(e.get("size"),n),r=z.availableSize(i,n);e.inner.set("desiredSize",i),e.inner.set("size",r)})),t.lifecycle.set("sortChildrenToMeasure",(function(e){return e.inner.get("sortedChildren")})),t.lifecycle.set("getChildMaxSize",(function(e,n,i){if(e.inner.get("notPositionedChildren").includes(i))return{width:0,height:0};const r=i.layoutParams.get("margin");let o=e.inner.call("getChildMaxRight",i)-e.inner.call("getChildMaxLeft",i)-r.left-r.right;o<0&&(o=0);let l=e.inner.call("getChildMaxBottom",i)-e.inner.call("getChildMaxTop",i)-r.top-r.bottom;return l<0&&(l=0),{width:o,height:l}})),t.lifecycle.set("getSize",(function(e){return e.inner.get("size")}))})(s),(function(t){t.lifecycle.set("sortChildrenToLocate",(function(e){return e.inner.get("sortedChildren")})),t.lifecycle.set("getChildCoords",(function(e,n,i){return e.inner.get("notPositionedChildren").includes(i)?{x:0,y:0}:{x:e.inner.call("getChildLeft",i)+n.x,y:e.inner.call("getChildTop",i)+n.y}}))})(s),(function(t){t.lifecycle.set("drawItself",(function(e,n){const i=e.coords,r=e.size,o=e.get("background"),l=e.get("border"),a=e.get("corner");b.area(n,i,r,o,l,a)})),t.lifecycle.set("sortChildrenToDraw",(function(e){return[...e.children].sort(((n,i)=>n.layoutParams.get("zIndex")-i.layoutParams.get("zIndex")))}))})(s)}function rt(){(function(){const s=m.composite.newType("textArea");s.set("size",{width:"auto",height:"auto"}),s.set("background","rgba(0,0,0,0)"),s.set("border",{color:"#000",size:0}),s.set("corner",{type:"cut",size:0}),s.set("text","Text"),s.set("font",{size:16,family:"Courier New",weight:400}),s.set("color","#000"),s.set("align",{vertical:"middle",horizontal:"middle"}),s.set("margin",{top:0,right:0,bottom:0,left:0}),s.lifecycle.set("getElement",(function(){const t=m.layout.new("frame","frame"),e=m.view.new("text","text");return t.insert(e),t})),s.lifecycle.set("updateElement",(function(t,e){e.set("size",t.get("size")),e.set("background",t.get("background")),e.set("border",t.get("border")),e.set("corner",t.get("corner"));const n=e.find("text");n.set("text",t.get("text")),n.set("font",t.get("font")),n.set("color",t.get("color")),n.set("align",t.get("align")),n.layoutParams.set("align",t.get("align")),n.layoutParams.set("margin",t.get("margin"))}))})(),(function(){const s=m.composite.newType("imageArea");s.set("size",{width:"auto",height:"auto"}),s.set("background","rgba(0,0,0,0)"),s.set("border",{color:"#000",size:0}),s.set("corner",{type:"cut",size:0}),s.set("imageSize",{width:100,height:100}),s.set("imageSrc",""),s.set("align",{vertical:"middle",horizontal:"middle"}),s.set("margin",{top:0,right:0,bottom:0,left:0}),s.lifecycle.set("getElement",(function(){const t=m.layout.new("frame","frame"),e=m.view.new("image","image");return t.insert(e),t})),s.lifecycle.set("updateElement",(function(t,e){e.set("size",t.get("size")),e.set("background",t.get("background")),e.set("border",t.get("border")),e.set("corner",t.get("corner"));const n=e.find("image");n.set("size",t.get("imageSize")),n.set("src",t.get("imageSrc")),n.layoutParams.set("align",t.get("align")),n.layoutParams.set("margin",t.get("margin"))}))})()}const E=new Map,L=new Map,I=new Map,m={ui:{new:s=>new D(s)},view:{newType(s){const t=new U(s);return E.set(s,t),t},new(s,t){const e=E.get(t);return new Q(s,e)}},layout:{newType(s){const t=new H(s);return L.set(s,t),t},new(s,t){const e=L.get(t);return new T(s,e)}},composite:{newType(s){const t=new O(s);return I.set(s,t),t},new(s,t){const e=I.get(t);return new Z(s,e)}}};tt(),et(),nt(),it(),st(),rt();const ot=function(s){s.lifecycle.set("getElement",function(t){return t.inner.call("buildGrid")}),s.inner.fun("buildGrid",function(t){const e=m.layout.new("grid","grid");e.set("dimensions",{rows:[{count:3,unit:"fr",value:1}],columns:[{count:3,unit:"fr",value:1}]}),e.set("gap",{size:{horizontal:3,vertical:3},color:"rgba(0,0,0,0)"});for(let n=0;n<3;n++)for(let i=0;i<3;i++){const r=t.inner.call("buildSquare",{column:n,row:i});t.inner.call("insertSquare",e,r,{column:n,row:i})}return e}),s.inner.fun("buildSquare",function(t,e){const{column:n,row:i}=e,r=`square-${n},${i}`,o=m.layout.new(r,"grid");o.set("dimensions",{rows:[{count:3,unit:"fr",value:1}],columns:[{count:3,unit:"fr",value:1}]}),o.set("gap",{size:{horizontal:1,vertical:1},color:"rgba(0,0,0,0)"});for(let l=0;l<3;l++)for(let a=0;a<3;a++){const c=t.inner.call("buildCell",{column:n*3+l,row:i*3+a});t.inner.call("insertCell",o,c,{column:l,row:a})}return o}),s.inner.fun("buildCell",function(t,e){const{column:n,row:i}=e,r=`cell-${n},${i}`,o=m.composite.new(r,"textArea");return o.set("size",{width:{unit:"%",value:100},height:{unit:"%",value:100}}),o.set("align",{horizontal:"middle",vertical:"middle"}),o.set("text",""),o.custom.set("position",{column:n,row:i}),o.listeners.add("click",function(l){const a=l.custom.get("position");t.signal({type:"cellClick",data:a,propagate:!1})}),o}),s.inner.fun("insertCell",function(t,e,n,i){e.insert(n),n.layoutParams.set("position",i)}),s.inner.fun("insertSquare",function(t,e,n,i){e.insert(n),n.layoutParams.set("position",i)})},lt=function(s){s.lifecycle.set("updateElement",function(t,e){t.inner.call("updateGrid",e)}),s.inner.fun("updateGrid",function(t,e){const n=t.get("size"),i=t.get("lines"),r=t.get("background");e.set("size",{width:{unit:"px",value:n},height:{unit:"px",value:n}}),e.get("gap").color=i.color,e.set("background",r),i.outside?e.set("border",{size:3,color:i.color}):e.set("border",{size:0,color:"rgba(0,0,0,0)"});for(let o=0;o<3;o++)for(let l=0;l<3;l++){const a=e.find(`square-${o},${l}`);t.inner.call("updateSquare",a)}}),s.inner.fun("updateSquare",function(t,e){const n=t.get("lines");e.get("gap").color=n.color;const{column:i,row:r}=e.layoutParams.get("position");for(let o=0;o<3;o++)for(let l=0;l<3;l++){const a=`cell-${i*3+o},${r*3+l}`,c=e.find(a);t.inner.call("updateCell",c)}}),s.inner.fun("updateCell",function(t,e){const n=t.inner.get("cells"),i=t.inner.get("selectedCell"),{column:r,row:o}=e.custom.get("position"),l=t.get("font");t.get("lines"),e.get("font").family=l.family,e.get("font").size=l.size,e.set("color",l.color);const{number:a,fixed:c}=n[r][o];a!==null?e.set("text",`${a}`):e.set("text",""),c?e.get("font").weight=700:e.get("font").weight=400,i!==null&&r===i.column&&o===i.row?e.set("background",t.get("selected").background):e.set("background","rgba(0,0,0,0)")})},at=function(s){ot(s),lt(s)},ct=function(s){s.fun("set",function(t,e,n){const{column:i,row:r}=e,o=t.inner.get("cells");o[i][r]=n}),s.fun("del",function(t,e){const{column:n,row:i}=e,r=t.inner.get("cells");r[n][i]={number:null,fixed:!1}}),s.fun("get",function(t,e){const{column:n,row:i}=e;return t.inner.get("cells")[n][i]}),s.fun("selectCell",function(t,e){t.inner.set("selectedCell",e)}),s.fun("unselectCell",function(t){t.inner.set("selectedCell",null)}),s.fun("selectedCell",function(t){return t.inner.get("selectedCell")})},ut=function(s){s.events.set("cellClick",function(t,e,n){return e.type!=="cellClick"?{event:!1}:{event:!0,data:e.data}}),s.events.set("numberClick",function(t,e,n){if(e.type!=="keyup")return{event:!1};const i=e.data;if(isNaN(i))return{event:!1};const r=+i;return r<1||r>9?{event:!1}:{event:!0,data:r}}),s.events.set("backspaceClick",function(t,e,n){return e.type!=="keyup"||e.data!=="Backspace"?{event:!1}:{event:!0}})},ht=function(){const s=m.composite.newType("sudoku");s.set("size",450),s.set("font",{size:26,family:"Courier New",color:"#000"}),s.set("lines",{color:"#000",outside:!0}),s.set("background","rgba(0,0,0,0)"),s.set("selected",{background:"#ccc"});const t=[];for(let e=0;e<9;e++){t.push([]);for(let n=0;n<9;n++)t[e].push({number:null,fixed:!1})}s.inner.set("cells",t),s.inner.set("selectedCell",null),at(s),ct(s),ut(s)},dt=function(){ht()};let gt=class{constructor(t){this._controller=t,this.model=t.model,this.view=t.view,this._bind()}_bind(){this._bindViewEvents()}_bindViewEvents(){this._bindClickGenerate()}_bindClickGenerate(){this.view.buttons.handlerClickGenerate(()=>{this._controller.sudoku.generate()})}};const ft=[[5,3,0,0,7,0,0,0,0],[6,0,0,1,9,5,0,0,0],[0,9,8,0,0,0,0,6,0],[8,0,0,0,6,0,0,0,3],[4,0,0,8,0,3,0,0,1],[7,0,0,0,2,0,0,0,6],[0,6,0,0,0,0,2,8,0],[0,0,0,4,1,9,0,0,5],[0,0,0,0,8,0,0,7,9]],mt=[[0,0,0,0,6,0,0,9,3],[0,8,0,0,0,7,4,0,0],[0,0,3,0,0,0,0,6,8],[0,0,0,0,2,3,0,0,0],[1,9,0,4,0,5,0,3,7],[0,0,0,1,7,0,0,0,0],[8,7,0,0,0,0,6,0,0],[0,0,1,8,0,0,0,7,0],[4,6,0,0,9,0,0,0,0]],yt=[[0,1,0,0,0,7,0,0,3],[6,0,0,4,0,0,7,0,0],[0,0,0,6,0,8,0,0,9],[5,0,0,0,2,4,0,0,0],[0,9,6,0,0,0,4,5,0],[0,7,0,9,0,0,0,0,1],[8,0,0,7,0,9,0,0,0],[0,0,2,0,0,6,0,0,7],[9,0,0,3,0,0,0,1,0]],wt=[[0,0,0,8,9,0,4,2,6],[0,0,7,6,0,0,1,9,0],[9,0,6,0,2,1,0,0,0],[0,0,0,0,3,8,2,6,0],[0,7,0,1,0,0,0,0,3],[8,3,5,0,0,0,7,0,4],[3,4,0,0,0,6,0,5,0],[0,0,1,5,8,0,3,0,0],[2,0,8,3,1,0,0,0,9]],pt=[[0,4,0,0,7,0,0,9,5],[0,6,0,0,2,0,0,0,0],[0,0,0,0,0,9,0,0,2],[7,0,0,0,1,0,0,8,0],[3,0,0,5,0,8,0,0,7],[0,9,0,0,3,0,0,0,6],[1,0,0,4,0,0,0,0,0],[0,0,0,0,8,0,0,3,0],[2,3,0,0,6,0,0,1,0]],F=[ft,mt,yt,wt,pt];let B=null;const zt=function(){for(;;){const s=F[Math.floor(Math.random()*F.length)];if(s!==B)return B=s,s}};let Ct=class{constructor(t){this._controller=t,this.model=t.model,this.view=t.view,this._bind(),this._init()}_init(){this.generate()}_bind(){this._bindViewEvents(),this._bindDataChanges()}_bindViewEvents(){this._bindCellClick(),this._bindNumberClick(),this._bindBackspaceClick()}_bindCellClick(){this.view.sudoku.handlerCellClick(t=>{const{number:e,fixed:n}=this.model.sudoku.get(t);(e===null||!n)&&this.model.sudoku.selectCell(t)})}_bindNumberClick(){this.view.sudoku.handlerNumberClick(t=>{const e=this.model.sudoku.selectedCell();e!==null&&this.model.sudoku.validNumber(e,t)&&this.model.sudoku.set(e,{number:t,fixed:!1})})}_bindBackspaceClick(){this.view.sudoku.handlerBackspaceClick(()=>{const t=this.model.sudoku.selectedCell();t!==null&&this.model.sudoku.del(t)})}_bindDataChanges(){this._bindSet(),this._bindDel(),this._bindSelectCell(),this._bindUnselectCell()}_bindSet(){this.model.sudoku.handlerSet((t,e)=>{this.view.sudoku.set(t,e)})}_bindDel(){this.model.sudoku.handlerDel(t=>{this.view.sudoku.del(t)})}_bindSelectCell(){this.model.sudoku.handlerSelectCell(t=>this.view.sudoku.selectCell(t))}_bindUnselectCell(){this.model.sudoku.handlerUnselectCell(()=>this.view.sudoku.unselectCell())}generate(){const t=zt();for(let e=0;e<9;e++)for(let n=0;n<9;n++){const i={column:e,row:n},r=t[n][e];r>0?this.model.sudoku.set(i,{number:r,fixed:!0}):this.model.sudoku.del(i)}}};class bt{constructor(t,e){this.model=t,this.view=e,this.sudoku=new Ct(this),this.buttons=new gt(this),this._bind()}_bind(){this._bindViewEvents()}_bindViewEvents(){this._bindClick()}_bindClick(){this.view.handlerClick(()=>{this.model.sudoku.unselectCell()})}}let vt=class{constructor(t){this._model=t,this._cells=this._buildCells(),this._selectedCell=null}_buildCells(){const t=[];for(let e=0;e<9;e++){t.push([]);for(let n=0;n<9;n++)t[e].push({number:null,fixed:!1})}return t}set(t,e){const{column:n,row:i}=t;this._cells[n][i]=e,this._onSet(t,e)}del(t){const{column:e,row:n}=t;this._cells[e][n]={number:null,fixed:!1},this._onDel(t)}get(t){const{column:e,row:n}=t;return this._cells[e][n]}selectCell(t){this._selectedCell=t,this._onSelectCell(t)}unselectCell(){this._selectedCell=null,this._onUnselectCell()}selectedCell(){return this._selectedCell}validNumber(t,e){for(let i=0;i<9;i++){if(t.row===i)continue;const r=t.column;if(this.get({row:i,column:r}).number===e)return!1}for(let i=0;i<9;i++){if(t.column===i)continue;const r=t.row;if(this.get({row:r,column:i}).number===e)return!1}const n={row:Math.floor(t.row/3),column:Math.floor(t.column/3)};for(let i=0;i<3;i++)for(let r=0;r<3;r++){const o=i+n.row*3,l=r+n.column*3;if(!(o===t.row&&l===t.column)&&this.get({row:o,column:l}).number===e)return!1}return!0}handlerSet(t){this._onSet=t}handlerDel(t){this._onDel=t}handlerSelectCell(t){this._onSelectCell=t}handlerUnselectCell(t){this._onUnselectCell=t}};class St{constructor(){this.sudoku=new vt(this)}}const C={styles:{sudoku:{size:450,font:{family:"Raleway, sans-serif",size:30,color:"#626262"},selected:{background:"#F5F5F5"},lines:{color:"#E0E0E0",outside:!1}},button:{color:"#626262",background:"#F5F5F5",border:{size:5,color:"#E0E0E0"},corner:{type:"round",size:10},font:{family:"Raleway, sans-serif",size:16,weight:600},mousedown:{background:"#E0E0E0"}}}};class xt{constructor(t){this._view=t,this._buttons=t.rootElement.find("buttons"),this._generate=this._buttons.find("buttonGenerate")}handlerClickGenerate(t){this._generate.listeners.add("click",function(e,n){t(n.cell)})}}class Pt{constructor(t){this._view=t,this._sudoku=t.rootElement.find("sudoku")}set(t,e){this._sudoku.call("set",t,e)}del(t){this._sudoku.call("del",t)}get(t){return this._sudoku.call("get",t)}selectCell(t){this._sudoku.call("selectCell",t)}unselectCell(){this._sudoku.call("unselectCell")}selectedCell(){return this._sudoku.call("selectedCell")}handlerCellClick(t){this._sudoku.listeners.add("cellClick",function(e,n){t(n)})}handlerNumberClick(t){this._sudoku.listeners.add("numberClick",function(e,n){t(n)})}handlerBackspaceClick(t){this._sudoku.listeners.add("backspaceClick",function(e,n){t()})}}class kt{constructor(t){this.ui=m.ui.new(t),this._buildUI(),this.ui.start(this.rootElement),this.sudoku=new Pt(this),this.buttons=new xt(this)}handlerClick(t){this.rootElement.listeners.add("click",function(e,n){t()})}_buildUI(){this.rootElement=this._buildRoot(),this.sudokuElement=this._buildSudoku(),this._insertSudoku(this.rootElement,this.sudokuElement),this.buttonsElement=this._buildButtons(),this._insertButtons(this.rootElement,this.buttonsElement)}_buildRoot(){return m.layout.new("root","relative")}_buildSudoku(){const t=m.composite.new("sudoku","sudoku");return t.set("size",C.styles.sudoku.size),t.set("font",C.styles.sudoku.font),t.set("lines",C.styles.sudoku.lines),t.set("selected",C.styles.sudoku.selected),t}_insertSudoku(t,e){t.insert(e),e.layoutParams.set("attachTo",{left:"parent",right:"parent",top:"parent",bottom:"parent"})}_buildButtons(){const t=m.layout.new("buttons","linear");t.set("size",{width:{unit:"px",value:C.styles.sudoku.size},height:"auto"}),t.set("direction","vertical"),t.set("gap",20);const e=this._buildButton("buttonGenerate","Generate");return t.insert(e),t}_buildButton(t,e){const n=m.composite.new(t,"textArea");return this._setButtonProperties(n,e),this._setButtonEffect(n),n}_setButtonProperties(t,e){t.set("size",{width:{unit:"%",value:100},height:{unit:"px",value:50}}),t.set("text",e),t.set("font",C.styles.button.font),t.set("color",C.styles.button.color),t.set("background",C.styles.button.background),t.set("border",C.styles.button.border),t.set("corner",C.styles.button.corner)}_setButtonEffect(t){t.listeners.add("mousedown",function(){t.set("background",C.styles.button.mousedown.background)}),this.rootElement.listeners.add("mouseup",function(){t.set("background",C.styles.button.background)})}_insertButtons(t,e){t.insert(e),e.layoutParams.set("attachTo",{top:{side:"bottom",child:"sudoku"},bottom:null,left:"parent",right:"parent"}),e.layoutParams.get("margin").top=50}}dt();new bt(new St,new kt("#ui"));
